<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Sehan Karunarathne | Interactive Portfolio</title>
<meta name="description" content="Portfolio of Sehan Karunarathne â€” Photoshop, Premiere Pro, After Effects, 3D art, UI/UX, branding, motion graphics, AI-assisted design." />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&family=Audiowide&family=Roboto+Mono&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

<style>
:root{
  --accent:#ff2a2a; --accent-2:#ff7b7b; --bg:#050507; --muted:#9b9b9b; --card:#111113;
  --glass: rgba(17, 17, 19, 0.6);
  --text-primary: #ffffff;
  --text-secondary: #d7d7d7;
}
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%; scroll-behavior: smooth;}
body{
  font-family:"Poppins",sans-serif;background:radial-gradient(1200px 600px at 10% 10%, rgba(255,42,42,0.04), transparent), var(--bg);color:var(--text-primary);overflow-y:auto; overflow-x: hidden;
  -webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;
}
.container{max-width:1200px;margin:0 auto;padding:0 18px}

/* ---------- NAVBAR ---------- */
.navbar {
  position: fixed; top: 0; left: 0; width: 100%; padding: 15px 30px;
  display: flex; justify-content: space-between; align-items: center; z-index: 1000;
  transition: transform 0.4s ease, background-color 0.4s ease, backdrop-filter 0.4s ease, padding 0.4s ease;
}
.navbar.scrolled {
  background-color: var(--glass);
  backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
  padding: 10px 30px; box-shadow: 0 4px 20px rgba(0,0,0,0.4);
}
.navbar.hidden { transform: translateY(-100%); }
.nav-logo { font-family: 'Audiowide', cursive; font-size: 1.5rem; color: var(--text-primary); text-decoration: none; }
.nav-right-group { display: flex; align-items: center; gap: 25px; }
.nav-links { list-style: none; display: flex; gap: 25px; }
.nav-links a { color: var(--text-secondary); text-decoration: none; font-weight: 600; position: relative; padding: 5px 0; transition: color 0.3s ease; }
.nav-links a:hover { color: var(--accent); }
.nav-links a::after {
  content: ''; position: absolute; bottom: 0; left: 0; width: 100%; height: 2px;
  background: var(--accent); transform: scaleX(0); transform-origin: right;
  transition: transform 0.3s ease-in-out;
}
.nav-links a:hover::after { transform: scaleX(1); transform-origin: left; }
.nav-btn { background: none; border: none; color: var(--text-secondary); font-size: 1.2rem; cursor: pointer; transition: color 0.3s, transform 0.3s; }
.nav-btn:hover { color: var(--accent); transform: scale(1.1); }
.mobile-nav-toggle { display: none; z-index: 1001; }
.mobile-nav-menu {
    display: none; position: fixed; top: 0; right: -100%;
    width: 250px; height: 100%; background-color: var(--card);
    flex-direction: column; align-items: center; justify-content: center;
    transition: right 0.4s ease-in-out; z-index: 999;
    box-shadow: -5px 0 25px rgba(0,0,0,0.5);
}
.mobile-nav-menu.open { right: 0; }
.mobile-nav-menu ul { list-style: none; display: flex; flex-direction: column; gap: 30px; text-align: center; }
.mobile-nav-menu a { font-size: 1.5rem; }


/* ---------- CANVAS & OVERLAYS ---------- */
canvas { position:fixed; left:0; top:0; width:100vw; height:100vh; pointer-events:none; z-index:0; }
.gradient-overlay{
  position:fixed; inset:0; z-index:2; pointer-events:none;
  background: linear-gradient(120deg, rgba(255,42,42,0.06), rgba(120,40,200,0.05), rgba(0,120,255,0.03));
  background-size: 400% 400%; mix-blend-mode: screen;
  animation: gradientMove 16s linear infinite;
}
@keyframes gradientMove{ 0%{background-position:0% 50%} 50%{background-position:100% 50%} 100%{background-position:0% 50%} }

/* ---------- BACKGROUND FLOATING IMAGES ---------- */
.bg-designs { position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1; overflow: hidden; pointer-events: none; }
.bg-designs img {
  position: absolute; object-fit: cover; border-radius: 8px;
  width: 120px; height: 120px; will-change: transform, opacity; box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

/* ---------- HERO ---------- */
.hero{ position:relative; z-index:3; min-height:100vh; display:flex; align-items:center; justify-content:center; padding:80px 20px; text-align:center; }
.hero-inner{ max-width:980px; width:100%; display:flex; flex-direction:column; align-items:center; gap:10px; }

.code-intro { font-family: 'Roboto Mono', monospace; color: var(--accent-2); margin-bottom: 10px; font-size: 1rem; }
.profile-pic-container { position: relative; }
.profile-pic{ width:170px;height:170px;border-radius:50%;object-fit:cover;border:3px solid var(--accent); animation:floatImg 4s ease-in-out infinite; box-shadow:0 12px 40px rgba(255,42,42,0.1); position: relative; z-index: 2; }
.profile-pic-glow {
  position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
  width: 170px; height: 170px; background: var(--accent); border-radius: 50%; filter: blur(40px);
  z-index: 1; animation: subtleGlow 4s ease-in-out infinite;
}
@keyframes subtleGlow { 0%, 100% { opacity: 0.15; } 50% { opacity: 0.3; } }
@keyframes floatImg{ 0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)} }

h1.main-name{
  font-family: 'Audiowide', cursive; font-size: clamp(2.2rem, 5vw, 4rem);
  font-weight:400; letter-spacing:1px; margin: 15px 0 5px;
  background:linear-gradient(90deg, var(--accent), #ff9c9c, var(--accent));
  background-size: 200% auto;
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  filter: drop-shadow(0 6px 20px rgba(255,42,42,0.1));
  animation: gradientText 5s linear infinite;
}
@keyframes gradientText { to { background-position: 200% center; } }

.ticker{ color:var(--muted); font-weight:600; margin-top:8px; min-height:26px; font-size: 1.1rem; }
.bio{ color:#d7d7d7; max-width:760px; margin-top:8px; line-height:1.6; font-size:clamp(0.9rem, 1.8vw, 1rem); }
.hero-cta{ display:flex; gap:12px; margin-top:14px; justify-content:center; flex-wrap:wrap; }
.btn{ padding:10px 22px; border-radius:999px; border:1px solid rgba(255,255,255,0.1); background:transparent; color:#fff; font-weight:700; cursor:pointer; transition:transform .2s, box-shadow .2s; text-decoration: none; display: inline-block; }
.btn.primary{ background:linear-gradient(90deg,var(--accent),var(--accent-2)); box-shadow:0 10px 30px rgba(255,42,42,0.15); border:0; }
.btn:hover{ transform:translateY(-6px) }

/* ---------- CONTENT & SECTIONS ---------- */
.content-wrap{ position:relative; z-index:3; padding:30px 12px 120px; }
.section{
    margin: 40px auto; padding:24px; border-radius:12px;
    background: var(--glass);
    border: 1px solid rgba(255,255,255,0.05);
    box-shadow:0 10px 40px rgba(0,0,0,0.6);
    backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
    max-width: 1200px;
}
.section h2{ font-size:2rem; margin-bottom:12px; font-weight: 800; text-align: center; }
.section p{ color:var(--muted); line-height:1.6; text-align: center; max-width: 800px; margin: 0 auto 20px auto;}

/* Skills Section */
.skills-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 25px; margin-top: 30px; }
.skill-item { }
.skill-item h3 { margin-bottom: 8px; font-weight: 600; color: var(--text-secondary); }
.skill-bar { width: 100%; height: 8px; background: rgba(0,0,0,0.3); border-radius: 4px; overflow: hidden; }
.skill-progress { width: 0%; height: 100%; background: linear-gradient(90deg, var(--accent), var(--accent-2)); border-radius: 4px; transition: width 1.5s ease-out; }

/* Clients Section */
.clients-grid { display: flex; flex-wrap: wrap; justify-content: center; align-items: center; gap: 40px; margin-top: 30px; }
.client-logo { filter: grayscale(100%) brightness(0.8); transition: filter 0.3s; height: 40px; }
.client-logo:hover { filter: grayscale(0%) brightness(1); }

/* --- GALLERY (MASONRY LAYOUT) --- */
.gallery-filters { display: flex; justify-content: center; gap: 10px; margin-bottom: 25px; flex-wrap: wrap; }
.filter-btn { padding: 8px 18px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.1); background:transparent; color:#fff; font-weight: 600; cursor: pointer; transition: all .2s; }
.filter-btn:hover { background: var(--accent); border-color: var(--accent); }
.filter-btn.active { background: var(--accent); border-color: var(--accent); box-shadow: 0 0 15px rgba(255,42,42,0.3); }
.gallery{ column-count: 4; column-gap: 15px; padding:28px 0; }
.gallery-card{
  margin-bottom: 15px; break-inside: avoid-column; border-radius:12px; overflow:hidden;
  background:#0c0c0c; border:1px solid rgba(255,255,255,0.03); box-shadow:0 8px 28px rgba(0,0,0,0.6);
  transition:transform .22s, opacity .3s, height .3s, margin .3s, padding .3s;
  position: relative;
}
.gallery-card.hidden { transform: scale(0.8); opacity: 0; height: 0; margin: 0; padding: 0; border: none; }
.gallery-card img{ width:100%; display:block; height:auto; }
.card-info-overlay {
    position: absolute; bottom: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(to top, rgba(0,0,0,0.9), transparent);
    color: white; padding: 20px; display: flex; flex-direction: column; justify-content: flex-end;
    opacity: 0; transform: translateY(20px); transition: all 0.4s ease;
}
.gallery-card:hover .card-info-overlay { opacity: 1; transform: translateY(0); }
.card-info-overlay h3 { font-size: 1.2rem; margin-bottom: 5px; }
.card-info-overlay p { font-size: 0.9rem; color: var(--muted); text-align: left; margin: 0; }


/* --- FINAL CTA & FOOTER --- */
.final-cta { text-align: center; padding: 60px 20px; }
.final-cta h2 { font-size: clamp(2rem, 6vw, 3.5rem); margin-bottom: 20px; }
.final-cta .animated-underline {
    display: inline-block; position: relative;
    background: linear-gradient(90deg, var(--accent), #ff9c9c);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.final-cta .animated-underline::after {
    content: ''; position: absolute; bottom: -5px; left: 0;
    width: 100%; height: 3px; background: var(--accent);
    transform: scaleX(0); transition: transform 0.4s ease-out;
}
.final-cta.visible .animated-underline::after { transform: scaleX(1); }
.footer-socials { display: flex; justify-content: center; gap: 20px; margin-top: 30px; }
.footer-socials a { font-size: 1.5rem; color: var(--muted); transition: color 0.3s, transform 0.3s; }
.footer-socials a:hover { color: var(--accent); transform: translateY(-5px); }
footer { text-align: center; padding: 20px; font-size: 0.9rem; color: var(--muted); }

/* --- FLOATING WIDGETS --- */
.floating-contact-bubble {
    position: fixed; bottom: 20px; right: 20px; z-index: 998;
    width: 60px; height: 60px; background: linear-gradient(45deg, var(--accent), var(--accent-2));
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    color: white; font-size: 1.8rem; box-shadow: 0 5px 20px rgba(255,42,42,0.3);
    cursor: pointer; animation: pulseGlow 2.5s infinite;
}
@keyframes pulseGlow {
    0%, 100% { box-shadow: 0 5px 20px rgba(255,42,42,0.3); transform: scale(1); }
    50% { box-shadow: 0 8px 35px rgba(255,42,42,0.5); transform: scale(1.05); }
}

/* AI Chat Widget */
.ai-chat-widget {
    position: fixed; bottom: 20px; left: -400px;
    width: 350px; background: var(--card); border-radius: 15px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.5); z-index: 999;
    overflow: hidden; transition: left 0.4s ease-in-out;
}
.ai-chat-widget.open { left: 20px; }
.ai-chat-header { background: var(--accent); padding: 10px 15px; display: flex; justify-content: space-between; align-items: center; color: white; }
.ai-chat-header h3 { font-size: 1rem; }
#closeChatBtn { background: none; border: none; color: white; font-size: 1.2rem; cursor: pointer; }
.ai-chat-body { padding: 15px; height: 300px; overflow-y: auto; }
.ai-message { margin-bottom: 12px; }
.ai-message p { padding: 8px 12px; border-radius: 10px; max-width: 80%; line-height: 1.4; font-size: 0.9rem; }
.ai-message.bot p { background: #333; color: var(--text-secondary); text-align: left; }
.user-questions { display: flex; flex-direction: column; gap: 8px; margin-top: 15px; }
.user-questions button {
    background: transparent; border: 1px solid var(--accent); color: var(--accent);
    padding: 8px; border-radius: 8px; cursor: pointer; text-align: left; transition: all 0.2s;
}
.user-questions button:hover { background: var(--accent); color: white; }

/* AUDIO MODAL */
.modal-overlay {
  position: fixed; inset: 0; background: rgba(0, 0, 0, 0.8); backdrop-filter: blur(10px);
  display: flex; justify-content: center; align-items: center; z-index: 1001;
  opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
}
.modal-overlay.visible { opacity: 1; pointer-events: auto; }
.modal-content {
  background: var(--card); padding: 24px; border-radius: 12px; text-align: center;
  border: 1px solid rgba(255, 255, 255, 0.05); box-shadow: 0 10px 50px rgba(0,0,0,0.5);
  transform: scale(0.95); transition: transform 0.3s ease; max-width: 400px; width: 90%;
}
.modal-overlay.visible .modal-content { transform: scale(1); }
.modal-content h2 { margin-bottom: 8px; font-size: 1.4rem; }
.modal-content p { color: var(--muted); margin-bottom: 16px; margin-left: 0; text-align: center;}
.modal-buttons { display: flex; gap: 12px; justify-content: center; }

/* --- RESPONSIVE --- */
@media (max-width:992px){
  .gallery { column-count: 3; }
}
@media (max-width:768px){
  .nav-links { display: none; }
  .mobile-nav-toggle { display: block; }
  .mobile-nav-menu { display: flex; }
  .nav-right-group { gap: 15px; }
  .profile-pic, .profile-pic-glow { width:140px;height:140px }
  .hero{ padding: 80px 14px; }
  .gallery { column-count: 2; }
  .section h2 { font-size: 1.8rem; }
  .ai-chat-widget { width: calc(100vw - 40px); }
}
@media (max-width:480px){
  .main-name{ font-size:1.8rem }
  .bio{ font-size:0.88rem }
  .hero-inner{ gap:8px }
  .gallery { column-count: 1; }
  .navbar { padding: 15px; }
  .navbar.scrolled { padding: 10px 15px; }
}
</style>
</head>
<body>

<canvas id="bgParticles"></canvas>
<canvas id="cursorTrail"></canvas>
<canvas id="nameParticles"></canvas>

<div class="gradient-overlay" aria-hidden="true"></div>
<div class="bg-designs" id="bgDesigns" aria-hidden="true"></div>

<nav class="navbar" id="navbar">
  <a href="#hero" class="nav-logo">SK</a>
  <div class="nav-right-group">
    <ul class="nav-links">
      <li><a href="#aboutSection">About</a></li>
      <li><a href="#skillsSection">Skills</a></li>
      <li><a href="#gallerySection">Work</a></li>
    </ul>
    <button id="audioToggleBtn" class="nav-btn" aria-label="Toggle audio">
      <i class="fa-solid fa-volume-xmark"></i>
    </button>
  </div>
   <button class="mobile-nav-toggle nav-btn" aria-label="Toggle navigation menu">
      <i class="fa-solid fa-bars"></i>
    </button>
</nav>

<nav class="mobile-nav-menu" id="mobileNavMenu">
  <ul>
    <li><a href="#aboutSection">About</a></li>
    <li><a href="#skillsSection">Skills</a></li>
    <li><a href="#gallerySection">Work</a></li>
  </ul>
</nav>

<section class="hero" id="hero">
  <div class="hero-inner container">
    <div id="codeIntro" class="code-intro"></div>
    <div class="profile-pic-container">
        <img id="profilePic" class="profile-pic" src="Design (100).png" alt="Sehan Karunarathne" onerror="this.src='https://placehold.co/170x170/050507/ff2a2a?text=SK';">
        <div class="profile-pic-glow"></div>
    </div>
    <h1 class="main-name" id="mainName">Sehan Karunarathne</h1>
    <div class="ticker" id="roleTicker" aria-live="polite"></div>
    <p class="bio">I craft cinematic visuals and production-ready design systems â€” from multi-week Photoshop productions and motion promos to UI/UX and AI-accelerated ideation.</p>
    <div class="hero-cta">
      <a href="#gallerySection" class="btn primary">View Work</a>
    </div>
  </div>
</section>

<div class="content-wrap container" id="contentWrap">

  <div class="section" id="skillsSection">
    <h2>Skills & Tools</h2>
    <p>My creative arsenal for building compelling digital experiences.</p>
    <div class="skills-grid">
        <div class="skill-item" data-skill="ps"><h3>Adobe Photoshop</h3><div class="skill-bar"><div class="skill-progress" data-progress="95"></div></div></div>
        <div class="skill-item" data-skill="pr"><h3>Adobe Premiere Pro</h3><div class="skill-bar"><div class="skill-progress" data-progress="90"></div></div></div>
        <div class="skill-item" data-skill="ae"><h3>Adobe After Effects</h3><div class="skill-bar"><div class="skill-progress" data-progress="85"></div></div></div>
        <div class="skill-item" data-skill="fg"><h3>Figma</h3><div class="skill-bar"><div class="skill-progress" data-progress="80"></div></div></div>
        <div class="skill-item" data-skill="ai"><h3>AI Design Stacks</h3><div class="skill-bar"><div class="skill-progress" data-progress="90"></div></div></div>
        <div class="skill-item" data-skill="3d"><h3>3D & Illustration</h3><div class="skill-bar"><div class="skill-progress" data-progress="75"></div></div></div>
    </div>
  </div>

  <div class="section" id="clientsSection">
      <h2>Trusted By</h2>
      <p>I've had the pleasure of collaborating with a diverse range of clients and organizations.</p>
      <div class="clients-grid">
          <img src="ESOFT.jpg" alt="eSoft Logo" class="client-logo">
          <img src="NSIS.png" alt="Print Vision Logo" class="client-logo">
          <img src="BLOCKCHAIN.png" alt="DreamStay Logo" class="client-logo">
          <img src="SED.png" alt="NSIS Logo" class="client-logo">
      </div>
  </div>

  <div class="section" id="gallerySection">
    <h2>Design Gallery</h2>
    <p>A selection of my recent work. Hover for details, click to expand, or give it a like!</p>
    <div class="gallery-filters" id="galleryFilters">
      <button class="filter-btn active" data-filter="all">All</button>
      <button class="filter-btn" data-filter="poster">Posters</button>
      <button class="filter-btn" data-filter="ui">UI/UX</button>
      <button class="filter-btn" data-filter="branding">Branding</button>
    </div>
    <section class="gallery" id="gallery"></section>
  </div>
</div>

<div class="final-cta" id="finalCta">
    <h2><span class>Let's Build Something Epic.</span></h2>
    <div class="footer-socials">
        <a href="#" aria-label="Behance"><i class="fab fa-behance"></i></a>
        <a href="#" aria-label="Dribbble"><i class="fab fa-dribbble"></i></a>
        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
        <a href="#" aria-label="GitHub"><i class="fab fa-github"></i></a>
    </div>
</div>

<footer>
    <p>&copy; <span id="year"></span> Sehan Karunarathne. All Rights Reserved.</p>
</footer>

<div class="floating-contact-bubble" id="chatBubble">
    <i class="fa-solid fa-comments"></i>
</div>

<div class="ai-chat-widget" id="aiChatWidget">
    <div class="ai-chat-header">
        <h3>Ask Me Anything!</h3>
        <button id="closeChatBtn"><i class="fa-solid fa-xmark"></i></button>
    </div>
    <div class="ai-chat-body" id="aiChatBody">
        <div class="ai-message bot"><p>Hello! I'm a bot. Ask me a question about Sehan's work.</p></div>
    </div>
    <div class="user-questions" id="userQuestions">
        <button data-question="tools">What tools do you use?</button>
        <button data-question="experience">What's your experience?</button>
        <button data-question="contact">How can I contact you?</button>
    </div>
</div>

<div id="audioModal" class="modal-overlay">
  <div class="modal-content">
    <h2>Enable Sound?</h2>
    <p>This site features background music and sound effects for a more immersive experience.</p>
    <div class="modal-buttons">
      <button id="enableAudioBtn" class="btn primary">Yes, enable</button>
      <button id="disableAudioBtn" class="btn">No, thanks</button>
    </div>
  </div>
</div>

<audio id="ambientAudio" loop src="ScoreSuite.mp3"></audio>

<script>
document.addEventListener('DOMContentLoaded', () => {

/* ===========================
    CONSTANTS & STATE
=========================== */
const IMAGE_FILES = [
  { file: "Design (1).jpg", category: "poster" },
  { file: "Design (1).png", category: "poster" },
  { file: "Design (2).jpg", category: "poster" },
  { file: "Design (2).png", category: "poster" },
  { file: "Design (3).jpg", category: "poster" },
  { file: "Design (3).png", category: "poster" },
  { file: "Design (4).jpg", category: "poster" },
  { file: "Design (4).png", category: "poster" },
  { file: "Design (5).jpg", category: "poster" },
  { file: "Design (5).png", category: "poster" },
  { file: "Design (6).jpg", category: "poster" },
  { file: "Design (6).png", category: "poster" },
  { file: "Design (7).jpg", category: "poster" },
  { file: "Design (7).png", category: "poster" },
  { file: "Design (8).jpg", category: "poster" },
  { file: "Design (8).png", category: "poster" },
  { file: "Design (9).jpg", category: "poster" },
  { file: "Design (9).png", category: "poster" },
  { file: "Design (10).jpg", category: "poster" },
  { file: "Design (10).png", category: "poster" },
  { file: "Design (11).jpg", category: "poster" },
  { file: "Design (11).png", category: "poster" },
  { file: "Design (12).jpg", category: "poster" },
  { file: "Design (12).png", category: "poster" },
  { file: "Design (13).jpg", category: "poster" },
  { file: "Design (13).png", category: "poster" },
  { file: "Design (14).jpg", category: "poster" },
  { file: "Design (14).png", category: "poster" },
  { file: "Design (15).jpg", category: "poster" },
  { file: "Design (16).jpg", category: "poster" },
  { file: "Design (16).png", category: "poster" },
  { file: "Design (17).jpg", category: "poster" },
  { file: "Design (17).png", category: "poster" },
  { file: "Design (18).jpg", category: "poster" },
  { file: "Design (18).png", category: "poster" },
  { file: "Design (19).png", category: "poster" },
  { file: "Design (20).png", category: "poster" },
  { file: "Design (21).png", category: "poster" },
  { file: "Design (22).png", category: "poster" },
  { file: "Design (23).png", category: "poster" },
  { file: "Design (24).png", category: "poster" },
  { file: "Design (25).png", category: "poster" },
  { file: "Design (26).png", category: "poster" },
  { file: "Design (27).png", category: "poster" },
  { file: "Design (28).png", category: "poster" },
  { file: "Design (29).png", category: "poster" },
  { file: "Design (30).png", category: "poster" },
  { file: "Design (31).png", category: "poster" },
  { file: "Design (32).png", category: "poster" },
  { file: "Design (33).png", category: "poster" },
  { file: "Design (34).png", category: "poster" },
  { file: "Design (35).png", category: "poster" },
  { file: "Design (36).png", category: "poster" },
  { file: "Design (37).png", category: "poster" },
  { file: "Design (38).png", category: "poster" },
  { file: "Design (39).png", category: "poster" },
  { file: "Design (40).png", category: "poster" },
  { file: "Design (41).png", category: "poster" },
  { file: "Design (42).png", category: "poster" },
  { file: "Design (43).png", category: "poster" },
  { file: "Design (44).png", category: "poster" },
  { file: "Design (45).png", category: "poster" },
  { file: "Design (46).png", category: "poster" },
  { file: "Design (47).png", category: "poster" },
  { file: "Design (48).png", category: "poster" },
  { file: "Design (49).png", category: "poster" },
  { file: "Design (50).png", category: "poster" },
  { file: "Design (51).png", category: "poster" },
  { file: "Design (52).png", category: "poster" },
  { file: "Design (53).png", category: "poster" },
  { file: "Design (54).png", category: "poster" },
  { file: "Design (100).png", category: "poster" }
].sort(() => 0.5 - Math.random());


const ROLES = ["Photoshop Specialist","Premiere Pro Editor","After Effects Motion Artist","Brand Creator","AI-assisted Designer"];
const CLICK_SOUND_B64 = "data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA";
const clickSound = new Audio(CLICK_SOUND_B64);

/* ===========================
    GENERAL SETUP & NAVBAR
=========================== */
document.getElementById('year').textContent = new Date().getFullYear();
const navbar = document.getElementById('navbar');
let lastScrollY = window.scrollY;

window.addEventListener('scroll', () => {
    // Scrolled class for background
    if (window.scrollY > 50) navbar.classList.add('scrolled');
    else navbar.classList.remove('scrolled');

    // Hide/show on scroll direction change
    if (window.scrollY > lastScrollY && window.scrollY > 100) {
        navbar.classList.add('hidden');
    } else {
        navbar.classList.remove('hidden');
    }
    lastScrollY = window.scrollY;
});

// Mobile Nav
const mobileNavToggle = document.querySelector('.mobile-nav-toggle');
const mobileNavMenu = document.getElementById('mobileNavMenu');
mobileNavToggle.addEventListener('click', () => {
    mobileNavMenu.classList.toggle('open');
    mobileNavToggle.innerHTML = mobileNavMenu.classList.contains('open') ? '<i class="fa-solid fa-xmark"></i>' : '<i class="fa-solid fa-bars"></i>';
});
mobileNavMenu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
        mobileNavMenu.classList.remove('open');
        mobileNavToggle.innerHTML = '<i class="fa-solid fa-bars"></i>';
    });
});


/* ============================
    AUDIO & SOUND FEEDBACK
============================ */
const audioModal = document.getElementById('audioModal');
const enableAudioBtn = document.getElementById('enableAudioBtn');
const disableAudioBtn = document.getElementById('disableAudioBtn');
const audioToggleBtn = document.getElementById('audioToggleBtn');
const ambientAudio = document.getElementById('ambientAudio');
let audioEnabled = false;

function playClickSound() { if(audioEnabled) { clickSound.currentTime=0; clickSound.play(); } }
document.querySelectorAll('a, button').forEach(el => el.addEventListener('click', playClickSound));

function playAudio() {
  if (ambientAudio.paused && audioEnabled) {
    ambientAudio.play().catch(e => console.error("Audio play failed:", e));
    audioToggleBtn.innerHTML = '<i class="fa-solid fa-volume-high"></i>';
  }
}
function pauseAudio() {
  if (!ambientAudio.paused) {
    ambientAudio.pause();
    audioToggleBtn.innerHTML = '<i class="fa-solid fa-volume-xmark"></i>';
  }
}
function initAudio() {
    if(audioEnabled) return;
    ambientAudio.volume = 0.2;
    audioEnabled = true;
    playAudio();
    audioModal.classList.remove('visible');
    localStorage.setItem('audioConsent', 'enabled');
}

audioToggleBtn.addEventListener('click', () => {
    if (!audioEnabled) initAudio();
    else if (ambientAudio.paused) playAudio();
    else pauseAudio();
});
enableAudioBtn.addEventListener('click', initAudio);
disableAudioBtn.addEventListener('click', () => {
  audioModal.classList.remove('visible');
  localStorage.setItem('audioConsent', 'disabled');
});

const audioConsent = localStorage.getItem('audioConsent');
if (audioConsent === 'enabled') {
  audioEnabled = true;
  playAudio();
} else if (audioConsent !== 'disabled') {
  audioModal.classList.add('visible');
}

/* ============================
    BACKGROUND FLOATING IMAGES
============================ */
const bgContainer = document.getElementById('bgDesigns');
const floatingImages = [];

function createFloatingImage(file) {
    const img = document.createElement('img');
    img.src = file;
    img.alt = 'background design thumbnail';
    img.onerror = () => img.remove();
    
    const size = Math.random() * 60 + 80;
    const x = Math.random() * window.innerWidth;
    const y = Math.random() * window.innerHeight;
    const vx = (Math.random() - 0.5) * 0.2;
    const vy = (Math.random() - 0.5) * 0.2;

    img.style.width = `${size}px`; img.style.height = `${size}px`;
    
    floatingImages.push({ el: img, x, y, vx, vy, life: 1, maxLife: Math.random() * 200 + 300 });
    bgContainer.appendChild(img);
}

IMAGE_FILES.slice(0, 15).forEach(item => createFloatingImage(item.file));

function updateFloatingImages() {
    floatingImages.forEach(imgObj => {
        imgObj.x += imgObj.vx; imgObj.y += imgObj.vy;
        if (imgObj.x < -150 || imgObj.x > window.innerWidth + 150) imgObj.vx *= -1;
        if (imgObj.y < -150 || imgObj.y > window.innerHeight + 150) imgObj.vy *= -1;
        imgObj.life++;
        imgObj.el.style.opacity = Math.sin((imgObj.life / imgObj.maxLife) * Math.PI) * 0.3;
        imgObj.el.style.transform = `translate(${imgObj.x}px, ${imgObj.y}px)`;
    });
    requestAnimationFrame(updateFloatingImages);
}
requestAnimationFrame(updateFloatingImages);

/* ============================
    GALLERY & FILTERING
============================ */
const gallery = document.getElementById('gallery');
const galleryFilters = document.getElementById('galleryFilters');
let likes = JSON.parse(localStorage.getItem('portfolioLikes')) || {};

IMAGE_FILES.forEach(item => {
    const card = document.createElement('div');
    card.className = 'gallery-card';
    card.dataset.id = item.file;
    card.dataset.category = item.category;

    card.innerHTML = `
        <img src="${item.file}" loading="lazy" alt="Portfolio design piece">
        <div class="card-info-overlay">
            <h3>${item.category.charAt(0).toUpperCase() + item.category.slice(1)} Project</h3>
            <p>Tools: Photoshop, Figma</p>
        </div>
    `;
    gallery.appendChild(card);
});

galleryFilters.addEventListener('click', e => {
    if(e.target.tagName !== 'BUTTON') return;
    const filter = e.target.dataset.filter;

    // Update active button
    galleryFilters.querySelector('.active').classList.remove('active');
    e.target.classList.add('active');

    // Filter cards
    document.querySelectorAll('.gallery-card').forEach(card => {
        if(filter === 'all' || card.dataset.category === filter) {
            card.classList.remove('hidden');
        } else {
            card.classList.add('hidden');
        }
    });
});

/* ============================
    TYPING EFFECTS
============================ */
// Code Intro
const codeIntroEl = document.getElementById('codeIntro');
const introText = "> Hello, Thanks for Visiting! You`re AWESOME...";
let introCharIdx = 0;
function typeIntro() {
    if (!codeIntroEl || introCharIdx > introText.length) return;
    codeIntroEl.textContent = introText.slice(0, introCharIdx) + (introCharIdx % 2 ? '_' : '');
    introCharIdx++;
    setTimeout(typeIntro, 100);
}
typeIntro();

// Role Ticker
let roleIdx = 0, charIdx = 0; const ticker = document.getElementById('roleTicker');
function typeRole(){
  if(!ticker) return;
  const curr = ROLES[roleIdx];
  charIdx++;
  ticker.textContent = curr.slice(0,charIdx) + (charIdx % 2 ? '|' : '');
  if(charIdx >= curr.length + 6){
    setTimeout(()=>{ charIdx = 0; roleIdx = (roleIdx+1)%ROLES.length; setTimeout(typeRole,120); }, 1000);
  } else setTimeout(typeRole,80);
}
setTimeout(typeRole, introText.length * 100 + 500); // Start after intro

/* ============================
    AI CHAT WIDGET
============================ */
const chatBubble = document.getElementById('chatBubble');
const aiChatWidget = document.getElementById('aiChatWidget');
const closeChatBtn = document.getElementById('closeChatBtn');
const userQuestions = document.getElementById('userQuestions');
const aiChatBody = document.getElementById('aiChatBody');

const responses = {
    tools: "I primarily use the Adobe Creative Suite (Photoshop, Premiere Pro, After Effects), Figma for UI/UX, and various AI tools like Midjourney and Google AI Studio for ideation and asset creation.",
    experience: "I have several years of experience in graphic design, motion graphics, and branding, working with clients like eSoft and Print Vision, and creating design courses for enterprise development.",
    contact: "The best way to reach me is via the social links at the bottom of the page or by emailing me at example@email.com."
};

chatBubble.addEventListener('click', () => aiChatWidget.classList.add('open'));
closeChatBtn.addEventListener('click', () => aiChatWidget.classList.remove('open'));
userQuestions.addEventListener('click', e => {
    if(e.target.tagName !== 'BUTTON') return;
    const questionKey = e.target.dataset.question;
    const response = responses[questionKey];
    
    const userMsg = document.createElement('div');
    userMsg.className = 'ai-message user';
    userMsg.innerHTML = `<p>${e.target.textContent}</p>`;
    
    const botMsg = document.createElement('div');
    botMsg.className = 'ai-message bot';
    botMsg.innerHTML = `<p>${response}</p>`;

    aiChatBody.appendChild(botMsg);
    aiChatBody.scrollTop = aiChatBody.scrollHeight;
});


/* ============================
    CANVAS PARTICLE EFFECTS
============================ */
const bgCanvas = document.getElementById('bgParticles');
const cursorCanvas = document.getElementById('cursorTrail');
const bgCtx = bgCanvas.getContext('2d');
const cursorCtx = cursorCanvas.getContext('2d');
let mouse = {x:-9999,y:-9999};

const resizeCanvases = () => {
  [bgCanvas,cursorCanvas].forEach(c=>{ if(c) { c.width = innerWidth; c.height = innerHeight; } });
};
resizeCanvases();
window.addEventListener('resize', resizeCanvases);
window.addEventListener('mousemove', e => { mouse.x = e.clientX; mouse.y = e.clientY; });
window.addEventListener('mouseleave', () => { mouse.x = -9999; mouse.y = -9999; });

let bgParticles = [];
const BG_COUNT = Math.floor(innerWidth / 25);
for(let i=0;i<BG_COUNT;i++){
  bgParticles.push({ x:Math.random()*innerWidth, y:Math.random()*innerHeight, r:Math.random()*1.5+0.5,
    vx:(Math.random()-0.5)*0.2, vy:(Math.random()-0.5)*0.2 });
}
let trail = [];

function animateParticles(){
    bgCtx.clearRect(0,0,innerWidth,innerHeight);
    cursorCtx.clearRect(0,0,innerWidth,innerHeight);

    bgParticles.forEach((p1, i) => {
        p1.x += p1.vx; p1.y += p1.vy;
        if(p1.x<0)p1.x=innerWidth; if(p1.x>innerWidth)p1.x=0; if(p1.y<0)p1.y=innerHeight; if(p1.y>innerHeight)p1.y=0;
        
        // Repulsion from mouse
        const dxMouse = p1.x - mouse.x, dyMouse = p1.y - mouse.y; const dMouse = Math.hypot(dxMouse,dyMouse);
        if(dMouse < 120){ const push = (1 - dMouse/120) * 0.5; p1.x += (dxMouse/dMouse||0)*push*3; p1.y += (dyMouse/dMouse||0)*push*3; }
        
        bgCtx.beginPath();
        bgCtx.fillStyle = `rgba(255,42,42,0.6)`;
        bgCtx.arc(p1.x,p1.y,p1.r,0,Math.PI*2); bgCtx.fill();
        
        // Connecting lines
        for(let j = i + 1; j < bgParticles.length; j++){
            const p2 = bgParticles[j];
            const dx = p1.x - p2.x, dy = p1.y - p2.y; const d = Math.hypot(dx,dy);
            if(d < 100){
                bgCtx.beginPath();
                bgCtx.moveTo(p1.x, p1.y);
                bgCtx.lineTo(p2.x, p2.y);
                bgCtx.strokeStyle = `rgba(255,42,42,${1 - d/100})`;
                bgCtx.lineWidth = 0.5;
                bgCtx.stroke();
            }
        }
    });
    
    trail.push({ x:mouse.x, y:mouse.y, life: 30, r: 3 });
    if(trail.length > 25) trail.shift();
    for(let i=trail.length-1;i>=0;i--){
        const t = trail[i]; t.life--;
        const alpha = Math.max(0, t.life / 30);
        const radius = Math.max(0, t.r * (t.life / 30));
        cursorCtx.fillStyle = `rgba(255, 42, 42, ${alpha * 0.5})`;
        cursorCtx.beginPath(); cursorCtx.arc(t.x,t.y,radius,0,Math.PI*2); cursorCtx.fill();
        if(t.life<=0) trail.splice(i,1);
    }

    requestAnimationFrame(animateParticles);
}
animateParticles();

/* ============================
    GSAP SCROLL TRIGGERS
============================ */
gsap.registerPlugin(ScrollTrigger);
gsap.to(".hero-inner", { opacity:0.1, y:-60, ease:"power1.out", scrollTrigger:{ trigger:".hero", start:"top top", end:"bottom top", scrub:0.8 }});
gsap.to(".bg-designs", { opacity: 0, ease:"none", scrollTrigger:{ trigger:".hero", start:"top top", end:"bottom top", scrub:0.6 } });

document.querySelectorAll('.section').forEach(sec => {
  gsap.from(sec, { y:50, opacity:0, duration:1, ease:"power2.out", scrollTrigger:{ trigger:sec, start:"top 85%", toggleActions:"play none none none" }});
});

ScrollTrigger.create({
    trigger: '#skillsSection',
    start: 'top 70%',
    once: true,
    onEnter: () => {
        document.querySelectorAll('.skill-progress').forEach(el => {
            el.style.width = el.dataset.progress + '%';
        });
    }
});
ScrollTrigger.create({
    trigger: '.final-cta',
    start: 'top 80%',
    once: true,
    onEnter: (self) => self.trigger.classList.add('visible')
});

});
</script>
</body>
</html>
